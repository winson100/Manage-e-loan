<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>我要借钱 - 东莞银行</title>
    <link rel="stylesheet" href="../src/styles/base/variables.css">
    <link rel="stylesheet" href="../src/styles/base/section.css">
    <link rel="stylesheet" href="../src/styles/base/element.css">
    <link rel="stylesheet" href="../src/styles/base/mobile-layout.css">
    <link rel="stylesheet" href="../src/styles/components/bar/nav-bar.css">
    <link rel="stylesheet" href="../src/styles/components/feedback/bottom-popup-title.css">
    <link rel="stylesheet" href="../src/styles/components/form/form-options.css">
    <link rel="stylesheet" href="../css/loan-application.css">
</head>
<body>
    <!-- 导航栏 - 固定定位 -->
    <div class="nav-bar nav-bar-white">
        <div class="nav-left" onclick="window.location.href='credit-limit-record.html'">
            <img src="../src/assets/icons/arrow-left.svg" alt="返回" class="nav-icon">
        </div>
        <div class="nav-title">我要借钱</div>
        <div class="nav-right">
            <img src="../assets/icons/more.svg" alt="更多" class="nav-icon">
        </div>
    </div>

    <div class="content-area">

        <!-- 可滚动内容容器 -->
        <div class="scrollable-main-content with-button-area">
                    
                    <!-- 借款金额 -->
                    <section class="info-section">
                        <div class="form-item">
                            <div class="form-label">借款金额(元)</div>
                            <div class="form-input">
                                <input type="text" id="loan-amount" placeholder="请输入借款金额" maxlength="10" oninput="validateLoanAmount(this)" onblur="formatLoanAmount(this)">
                                <img src="../src/assets/icons/question.svg" alt="借款金额说明" class="input-help-icon" onclick="showAmountHelp()" title="点击查看">
                            </div>
                        </div>
                    </section>

                    <!-- 借款期限 -->
                    <section class="info-section">
                        <div class="form-item" onclick="showPeriodSelector()">
                            <div class="form-label">借款期限(月)</div>
                            <div class="form-input form-input-readonly">
                                <div class="form-input-text" id="loan-period">请选择借款期限</div>
                                <img src="../src/assets/icons/arrow-down.svg" alt="选择" class="input-arrow">
                            </div>
                        </div>
                    </section>

                    <!-- 还款方式 -->
                    <section class="info-section">
                        <div class="form-item" onclick="showRepaymentSelector()">
                            <div class="form-label">还款方式</div>
                            <div class="form-input form-input-readonly">
                                <div class="form-input-text" id="repayment-method">请选择还款方式</div>
                                <img src="../src/assets/icons/arrow-down.svg" alt="选择" class="input-arrow">
                            </div>
                        </div>
                    </section>

                    <!-- 贷款年利率 -->
                    <section class="info-section">
                        <div class="form-item">
                            <div class="form-label">贷款年利率</div>
                            <div class="form-input form-input-readonly">
                                <input type="text" id="loan-rate" value="3.88%" class="form-input-emphasize" disabled>
                            </div>
                        </div>
                        <div class="rate-tip">本笔贷款年利率为固定利率，年利率3.88%，在贷款期限内，该利率保持不变。</div>
                    </section>

                    <!-- 优惠券 -->
                    <section class="info-section">
                        <div class="form-item" onclick="showCouponSelector()">
                            <div class="form-label">优惠券</div>
                            <div class="form-input form-input-readonly">
                                <div class="form-input-text" id="coupon">请选择优惠券</div>
                                <img src="../src/assets/icons/arrow-down.svg" alt="选择" class="input-arrow">
                            </div>
                        </div>
                        <div class="coupon-tip" id="coupon-tip" style="display: none;">前3期利息总计仅需288.96元</div>
                    </section>

                    <!-- 还款间隔 -->
                    <section class="info-section">
                        <div class="form-item">
                            <div class="form-label">还款间隔</div>
                            <div class="form-input">
                                <input type="text" value="每月" class="form-input-emphasize" disabled>
                            </div>
                        </div>
                    </section>

                    <!-- 首期优惠利息 -->
                    <section class="info-section" id="first-interest-section" style="display: none;">
                        <div class="form-item">
                            <div class="form-label">首期优惠利息(元)</div>
                            <div class="form-input">
                                <input type="text" id="first-interest" value="68.88" class="form-input-emphasize" disabled>
                            </div>
                        </div>
                    </section>

                    <!-- 首期本金 -->
                    <section class="info-section">
                        <div class="form-item">
                            <div class="form-label">首期本金(元)</div>
                            <div class="form-input">
                                <input type="text" id="first-principal" value="0.00" class="form-input-emphasize" disabled>
                            </div>
                        </div>
                    </section>

                    <!-- 首期利息 -->
                    <section class="info-section">
                        <div class="form-item">
                            <div class="form-label">首期利息(元)</div>
                            <div class="form-input">
                                <input type="text" id="first-interest-normal" value="0.00" class="form-input-emphasize" disabled>
                            </div>
                        </div>
                    </section>

                    <!-- 首期本息 -->
                    <section class="info-section">
                        <div class="form-item">
                            <div class="form-label">首期本息(元)</div>
                            <div class="form-input">
                                <input type="text" id="first-total" value="0.00" class="form-input-emphasize" disabled>
                            </div>
                        </div>
                    </section>

                    <!-- 还款计划 -->
                    <section class="info-section">
                        <div class="form-item" onclick="showRepaymentPlan()">
                            <div class="form-label">还款计划</div>
                            <div class="form-input form-input-readonly">
                                <div class="form-input-text">查看详情</div>
                                <img src="../src/assets/icons/arrow-right.svg" alt="查看" class="input-arrow">
                            </div>
                        </div>
                    </section>

                    <!-- 放款/还款账户 -->
                    <section class="info-section">
                        <div class="form-item" onclick="showAccountSelector()">
                            <div class="form-label">放款/还款账户</div>
                            <div class="form-input form-input-readonly">
                                <div class="form-input-text" id="loan-account">请选择放款账户</div>
                                <img src="../src/assets/icons/arrow-down.svg" alt="选择" class="input-arrow">
                            </div>
                        </div>
                    </section>

                    <!-- 支付方式 -->
                    <section class="info-section">
                        <div class="form-item" onclick="showPaymentSelector()">
                            <div class="form-label">支付方式</div>
                            <div class="form-input form-input-readonly">
                                <div class="form-input-text" id="payment-method">请选择支付方式</div>
                                <img src="../src/assets/icons/arrow-down.svg" alt="选择" class="input-arrow">
                            </div>
                        </div>
                    </section>

                    <!-- 受托支付信息（受托支付时显示） -->
                    <section class="info-section" id="trustee-payment-section" style="display: none;">
                        <div class="trustee-payment-container">
                            <div class="trustee-payment-list" id="trustee-payment-list">
                                <!-- 受托支付信息卡片将通过JavaScript动态生成 -->
                            </div>
                        </div>
                    </section>

                    <!-- 认证方式 -->
                    <section class="info-section">
                        <div class="form-item">
                            <div class="form-label">认证方式</div>
                            <div class="form-input">
                                <input type="text" value="短信验证码+卡密" class="form-input-emphasize" disabled>
                            </div>
                        </div>
                    </section>

                    <!-- 协议同意（根据支付方式动态显示） -->
                    <section class="info-section" id="agreement-section">
                        <div class="agreement-section">
                            <label class="checkbox">
                                <input type="checkbox" id="agreement-checkbox">
                                <span class="checkbox__text">本人已阅读并确认签署 
                                    <a href="#" class="agreement-link" onclick="showAgreement('credit')">《东莞银行个人在线综合信贷合同》</a>
                                    <span id="purpose-agreement-text" style="display: none;">
                                        <a href="#" class="agreement-link" onclick="showAgreement('purpose')">《贷款用途说明书》</a>
                                    </span>
                                </span>
                            </label>
                        </div>
                    </section>

        </div>
    </div>

    <!-- 底部按钮容器 - 固定定位 -->
    <div class="bottom-button-container">
        <button class="btn-large btn-primary btn-disabled" id="submit-btn" onclick="submitLoanApplication()">
            <span class="btn-text">下一步</span>
        </button>
    </div>

    <!-- 底部弹窗选择器 -->
    <div id="selector-mask">
        <div class="popup-container" id="selector-popup">
            <section class="section-popup-title">
                <div class="popup-title-container">
                    <div class="popup-title-icon-wrapper" onclick="closeSelector()">
                        <img src="../src/assets/icons/arrow-left.svg" alt="返回" class="popup-title-icon-img">
                    </div>
                    <div class="popup-title-main-text" id="selector-title">请选择</div>
                    <div class="popup-title-action-btn" onclick="closeSelector()">确定</div>
                </div>
            </section>

            <div class="form-section" id="selector-options">
                <!-- 选项内容将通过JavaScript动态生成 -->
            </div>

            <div class="bottom-bar">
                <div class="popup-indicator"></div>
            </div>
        </div>
    </div>

    <script src="../js/loan-application.js"></script>
</body>
</html>
